<div class="container-fluid">
  <div class="row">
    <div class="col col-md-3">
      <h2>Pending rides</h2>
      <div *ngIf="pendingRides.length === 0">
        There are no pending rides yet.
      </div>
      <div *ngIf="pendingRides.length > 0" class="side-list">
        <table class="table table-hover">
          <tr *ngFor="let ride of pendingRides">
            <td>
              <!--Card-->
              <div class="card">
                <div class="card-header">
                  <div class="card-header-tabs">
                    <!-- Button trigger modal -->
                    <button type="button" (click)="startProcessingARide(ride.id)" class="btn btn-primary btn-sm float-right" data-toggle="modal" data-target="#processARideModal">
                      Process
                    </button>
                  </div>
                </div>
                <!--Card content-->
                <div class="card-block">
                  <!-- Modal -->
                  <div class="modal fade" id="processARideModal" tabindex="-1" role="dialog" aria-labelledby="processARideModalTitle" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="processARideModalTitle">Process a ride</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <form [formGroup]="processARideForm">
                            <div class="form-group">
                              <h3>Starting location</h3>
                              <div>
                                <legend>Address</legend>
                                <label for="streetName">Street Name</label>
                                <input disabled [value]="ride?.startLocation?.address?.streetName" type="text" name="streetName" class="form-control form-control-sm">
                                <label for="streetNumber">Street Number</label>
                                <input disabled [value]="ride?.startLocation?.address?.streetNumber" type="text" name="streetNumber" class="form-control form-control-sm">
                                <label for="city">City</label>
                                <input disabled [value]="ride?.startLocation?.address?.city" type="text" name="city" class="form-control form-control-sm">
                                <label for="postalCode">Postal Code</label>
                                <input disabled [value]="ride?.startLocation?.address?.postalCode" type="text" name="postalCode" class="form-control form-control-sm">
                              </div>
                              <legend>Coordinates</legend>
                              <label for="longitude">Longitude</label>
                              <input disabled [value]="ride?.startLocation?.longitude" type="text" name="longitude" class="form-control form-control-sm">
                              <label for="latitude">Latitude</label>
                              <input disabled [value]="ride?.startLocation?.latitude" type="text" name="latitude" class="form-control form-control-sm">
                            </div>
                            <div class="form-group">
                              <h3>Car type</h3>
                              <select disabled [value]="ride?.carType" name="carType" class="custom-select form-control form-control-sm">
                                <option>PASSENGER</option>
                                <option>VAN</option>
                              </select>
                            </div>
                            <div class="form-group">
                              <h3>Driver</h3>
                              <select required formControlName="driverId" class="custom-select form-control form-control-sm">
                                <option *ngFor="let driver of allDrivers" [value]="driver.id">{{driver.name}} {{driver.lastname}}</option>
                              </select>
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                              <button class="btn btn-primary" (click)="processARide(ride?.id)" [disabled]="!processARideForm.valid" type="button">Process</button>
                            </div>    
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="card-body">
                    <!--Title-->
                    <h4 class="card-title">{{ride.startLocation?.address?.streetName}} {{ride.startLocation?.address?.streetNumber}}</h4>
                    <!--Text-->
                    <span class="card-text">Price: </span>
                    <span class="card-text">{{ride?.price}}</span>
                    <br/>
                    <span class="card-text">Street name: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.streetName}}</span>
                    <br/>
                    <span class="card-text">Street number: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.streetNumber}}</span>
                    <br/>
                    <span class="card-text">City: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.city}}</span>
                    <br/>
                    <span class="card-text">Postal code: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.postalCode}}</span>
                    <br/>
                    <span class="card-text">Longitude: </span>
                    <span class="card-text">{{ride?.startLocation?.longitude}}</span>
                    <br/>
                    <span class="card-text">Latitude: </span>
                    <span class="card-text">{{ride?.startLocation?.latitude}}</span>
                    <br/>
                    <span class="card-text">Car type: </span>
                    <span class="card-text">{{ride?.carType}}</span>
                    <br/>
                    <span class="card-text">Timestamp: </span>
                    <span class="card-text">{{ride?.timestamp}}</span>
                    <br/>
                    <span class="card-text">Status: </span>
                    <span class="card-text">{{ride?.rideStatus}}</span>
                    <br/>
                    <span class="card-text">Customer:</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Name: </span>
                    <span class="card-text">{{ride?.customer?.name}}</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Lastname: </span>
                    <span class="card-text">{{ride?.customer?.lastname}}</span>
                    <br/>
                    <span class="card-text">Driver:</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Name: </span>
                    <span class="card-text">{{ride?.driver?.name}}</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Lastname: </span>
                    <span class="card-text">{{ride?.driver?.lastname}}</span>
                    <br/>
                    <span class="card-text">Dispatcher:</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Name: </span>
                    <span class="card-text">{{ride?.dispatcher?.name}}</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Lastname: </span>
                    <span class="card-text">{{ride?.dispatcher?.lastname}}</span>
                    <div *ngFor="let comment of ride?.comments">
                      <br/>
                      <span class="card-text">Rating: </span>
                      <span>
                          <a *ngFor="let rating of ratingList; let i = index">
                            <i [ngStyle]="{'color': (i < comment?.rating) ? 'red' : 'grey'}" class="fa fa-star"></i>
                          </a>
                      </span>
                      <br/>
                      <form #addCommentForm="ngForm" (ngSubmit)="addComment(addCommentForm.value)">
                        <input type="text" hidden name="rideId" [(ngModel)]="ride.id" #rideId="ngModel"/>
                        <textarea readonly="true" type="text" class="form-control form-control-lg" placeholder="Leave a comment..." name="description" #description="ngModel" [ngModel]="comment?.description" (ngModelChange)="comment.description=$event"></textarea>
                        <span *ngIf="comment?.description !== null" class="card-text float-left">{{comment?.user.username}} at {{comment?.timestamp?.toLocaleDateString()}} {{comment?.timestamp?.toLocaleTimeString()}}</span>
                        <input *ngIf="comment?.user?.username === personalData?.username" type="submit" value="Comment" [disabled]="description.pristine" class="btn btn-primary btn-sm float-right"/>
                      </form>
                      <br/>
                    </div>
                  </div>
                </div>
                <!--/.Card content-->
              </div>
              <!--/.Card-->
            </td>
          </tr>
        </table>
        <!-- </div> -->
      </div>
    </div>
    <div class="col col-md-3">
      <h2>Form a ride</h2>
      <div *ngIf="!isRideRequestPending">
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#formARideModal">
          New ride
        </button>
      </div>
      <!-- Modal -->
      <div class="modal fade" id="formARideModal" tabindex="-1" role="dialog" aria-labelledby="formARideModalTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="formARideModalTitle">Form a ride</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form [formGroup]="rideForm">
                <div class="form-group" formGroupName="location">
                  <h3>Starting location</h3>
                  <div formGroupName="address">
                    <legend>Address</legend>
                    <label for="streetName">Street Name</label>
                    <input required formControlName="streetName" type="text" name="streetName" class="form-control form-control-sm">
                    <label for="streetNumber">Street Number</label>
                    <input required formControlName="streetNumber" type="text" name="streetNumber" class="form-control form-control-sm">
                    <label for="city">City</label>
                    <input required formControlName="city" type="text" name="city" class="form-control form-control-sm">
                    <label for="postalCode">Postal Code</label>
                    <input required formControlName="postalCode" type="text" name="postalCode" class="form-control form-control-sm">
                  </div>
                  <legend>Coordinates</legend>
                  <label for="longitude">Longitude</label>
                  <input required formControlName="longitude" type="text" name="longitude" class="form-control form-control-sm">
                  <label for="latitude">Latitude</label>
                  <input required formControlName="latitude" type="text" name="latitude" class="form-control form-control-sm">
                </div>
                <div class="form-group">
                  <h3>Car type</h3>
                  <select formControlName="carType" name="carType" class="custom-select form-control form-control-sm">
                    <option>PASSENGER</option>
                    <option>VAN</option>
                  </select>
                </div>
                <div class="form-group">
                  <h3>Driver</h3>
                  <select required formControlName="driverId" class="custom-select form-control form-control-sm">
                    <option *ngFor="let driver of allDrivers" [value]="driver.id">{{driver.name}} {{driver.lastname}}</option>
                  </select>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button *ngIf="!isRideChanging" class="btn btn-primary" (click)="formARide()" type="button" [disabled]="!rideForm.valid">Form</button>
                </div>    
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col col-md-3">
      <h2>My personal data</h2>
      <form [formGroup]="personalDataForm">
        <table class="table table-sm table-hover">
          <tr>
            <td>Username:</td>
            <td>
              <div class="form-group">
                <input formControlName="username" class="form-control form-control-sm">
                <div class="alert alert-danger" *ngIf="pdForm.username.touched && !pdForm.username.valid">
                  <div *ngIf="pdForm.username.errors.required">Username is required.</div>
                  <div *ngIf="pdForm.username.errors.minlength">Username needs to be at least 8 characters long.</div>
                  <div *ngIf="pdForm.username.errors.maxlength">Username needs to be maximum of 30 characters long.</div>
                  <div *ngIf="pdForm.username.errors.pattern">Username can contain only ASCII characters and numbers.</div>
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td>Password:</td>
            <td>
              <div class="form-group">
                <input formControlName="password" class="form-control form-control-sm">
                <div class="alert alert-danger" *ngIf="pdForm.password.touched && !pdForm.password.valid">
                  <div *ngIf="pdForm.password.errors.required">Password is required.</div>
                  <div *ngIf="pdForm.password.errors.minlength">Password needs to be at least 8 characters long.</div>
                  <div *ngIf="pdForm.password.errors.maxlength">Password needs to be maximum of 30 characters long.</div>
                  <div *ngIf="pdForm.password.errors.pattern">Password can contain only ASCII characters and numbers.</div>
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td>Name:</td>
            <td>
              <div class="form-group">
                <input formControlName="name" class="form-control form-control-sm">
                <div class="alert alert-danger" *ngIf="pdForm.name.touched && !pdForm.name.valid">
                  <div *ngIf="pdForm.name.errors.required">Name is required.</div>
                  <div *ngIf="pdForm.name.errors.minlength">Name needs to be at least 3 characters long.</div>
                  <div *ngIf="pdForm.name.errors.maxlength">Name needs to be maximum of 30 characters long.</div>
                  <div *ngIf="pdForm.name.errors.pattern">Name can contain only ASCII characters.</div>
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td>Lastname:</td>
            <td>
              <div class="form-group">
                <input formControlName="lastname" class="form-control form-control-sm">
                <div class="alert alert-danger" *ngIf="pdForm.lastname.touched && !pdForm.lastname.valid">
                  <div *ngIf="pdForm.lastname.errors.required">Lastname is required.</div>
                  <div *ngIf="pdForm.lastname.errors.minlength">Lastname needs to be at least 3 characters long.</div>
                  <div *ngIf="pdForm.lastname.errors.maxlength">Lastname needs to be maximum of 30 characters long.</div>
                  <div *ngIf="pdForm.lastname.errors.pattern">Lastname can contain only ASCII characters.</div>
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td>Email:</td>
            <td>
              <div class="form-group">
                <input formControlName="email" class="form-control form-control-sm">
                <div class="alert alert-danger" *ngIf="pdForm.email.touched && !pdForm.email.valid">
                  <div *ngIf="pdForm.email.errors.required">Email is required.</div>
                  <div *ngIf="pdForm.email.errors.email">Email is not valid.</div>
                  <div *ngIf="pdForm.email.errors.maxlength">Email can be a maximum of 254 characters long.</div>
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td>Gender:</td>
            <td>
              <div class="form-group">
                <select formControlName="gender" class="custom-select form-control form-control-sm">
                  <option>MALE</option>
                  <option>FEMALE</option>
                </select>
                <div class="alert alert-danger" *ngIf="pdForm.gender.touched && !pdForm.gender.valid">
                  <div *ngIf="pdForm.gender.errors.required">Gender is required.</div>
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td>NIDN:</td>
            <td>
              <div class="form-group">
                <input formControlName="nationalIdentificationNumber" class="form-control form-control-sm">
                <div class="alert alert-danger" *ngIf="pdForm.nationalIdentificationNumber.touched && !pdForm.nationalIdentificationNumber.valid">
                  <div *ngIf="pdForm.nationalIdentificationNumber.errors.minlength || pdForm.nationalIdentificationNumber.errors.maxlength">National identification number needs to be 13 digits long.</div>
                  <div *ngIf="pdForm.nationalIdentificationNumber.errors.pattern">National identification number can contain only numbers.</div>
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td>Phone number:</td>
            <td>
              <div class="form-group">
                <input formControlName="phoneNumber" class="form-control form-control-sm">
                <div class="alert alert-danger" *ngIf="pdForm.phoneNumber.touched && !pdForm.phoneNumber.valid">
                  <div *ngIf="pdForm.phoneNumber.errors.minlength">Phone number needs to be at least 5 digits long.</div>
                  <div *ngIf="pdForm.phoneNumber.errors.maxlength">Phone number needs to be maximum of 10 digits long.</div>
                  <div *ngIf="pdForm.phoneNumber.errors.pattern">Phone number can contain only numbers.</div>
                </div>
              </div>
            </td>
          </tr>
        </table>
        <button [hidden]="!personalDataForm.dirty && personalDataForm.valid" class="btn btn-primary" type="submit" [disabled]="!personalDataForm.valid" (click)="changeMyData()">Save changes</button>  
      </form>
    </div>
    <div class="col col-md-3">
      <h2>My rides</h2>
      <div *ngIf="dispatcherRides.length === 0">
        You haven't formed or processed any rides yet.
      </div>
      <div *ngIf="dispatcherRides.length > 0" class="side-list">
        <table class="table table-hover">
          <tr *ngFor="let ride of dispatcherRides">
            <td>
              <!--Card-->
              <div class="card">
                <!--Card content-->
                <div class="card-block">
                  <div class="card-body">
                    <!--Title-->
                    <h4 class="card-title">{{ride.startLocation?.address?.streetName}} {{ride.startLocation?.address?.streetNumber}}</h4>
                    <!--Text-->
                    <span class="card-text">Price: </span>
                    <span class="card-text">{{ride?.price}}</span>
                    <br/>
                    <span class="card-text">Street name: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.streetName}}</span>
                    <br/>
                    <span class="card-text">Street number: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.streetNumber}}</span>
                    <br/>
                    <span class="card-text">City: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.city}}</span>
                    <br/>
                    <span class="card-text">Postal code: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.postalCode}}</span>
                    <br/>
                    <span class="card-text">Longitude: </span>
                    <span class="card-text">{{ride?.startLocation?.longitude}}</span>
                    <br/>
                    <span class="card-text">Latitude: </span>
                    <span class="card-text">{{ride?.startLocation?.latitude}}</span>
                    <br/>
                    <span class="card-text">Car type: </span>
                    <span class="card-text">{{ride?.carType}}</span>
                    <br/>
                    <span class="card-text">Timestamp: </span>
                    <span class="card-text">{{ride?.timestamp}}</span>
                    <br/>
                    <span class="card-text">Status: </span>
                    <span class="card-text">{{ride?.rideStatus}}</span>
                    <br/>
                    <span class="card-text">Customer:</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Name: </span>
                    <span class="card-text">{{ride?.customer?.name}}</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Lastname: </span>
                    <span class="card-text">{{ride?.customer?.lastname}}</span>
                    <br/>
                    <span class="card-text">Driver:</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Name: </span>
                    <span class="card-text">{{ride?.driver?.name}}</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Lastname: </span>
                    <span class="card-text">{{ride?.driver?.lastname}}</span>
                    <br/>
                    <span class="card-text">Dispatcher:</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Name: </span>
                    <span class="card-text">{{ride?.dispatcher?.name}}</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Lastname: </span>
                    <span class="card-text">{{ride?.dispatcher?.lastname}}</span>
                    <div *ngFor="let comment of ride?.comments">
                      <br/>
                      <span class="card-text">Rating: </span>
                      <span>
                          <a *ngFor="let rating of ratingList; let i = index">
                            <i [ngStyle]="{'color': (i < comment?.rating) ? 'red' : 'grey'}" class="fa fa-star"></i>
                          </a>
                      </span>
                      <br/>
                      <form #addCommentForm="ngForm" (ngSubmit)="addComment(addCommentForm.value)">
                        <input type="text" hidden name="rideId" [(ngModel)]="ride.id" #rideId="ngModel"/>
                        <textarea readonly="true" type="text" class="form-control form-control-lg" placeholder="Leave a comment..." name="description" #description="ngModel" [ngModel]="comment?.description" (ngModelChange)="comment.description=$event"></textarea>
                        <span *ngIf="comment?.description !== null" class="card-text float-left">{{comment?.user.username}} at {{comment?.timestamp?.toLocaleDateString()}} {{comment?.timestamp?.toLocaleTimeString()}}</span>
                        <input *ngIf="comment?.user?.username === personalData?.username" type="submit" value="Comment" [disabled]="description.pristine" class="btn btn-primary btn-sm float-right"/>
                      </form>
                      <br/>
                    </div>
                  </div>
                </div>
                <!--/.Card content-->
              </div>
              <!--/.Card-->
            </td>
          </tr>
        </table>
        <!-- </div> -->
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col col-md-3">
      <h2>Add a driver</h2>
      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addADriverModal">
        New driver
      </button>
        <!-- Modal -->
      <div class="modal fade" id="addADriverModal" tabindex="-1" role="dialog" aria-labelledby="addADriverModalTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addADriverModalTitle">Add a new driver</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form [formGroup]="driverForm">
                <h3>Personal information</h3>
                <label for="username">Username</label>
                <input formControlName="username" class="form-control form-control-sm">
                <label for="password">Password</label>
                <input formControlName="password" class="form-control form-control-sm">
                <label for="name">Name</label>
                <input formControlName="name" class="form-control form-control-sm">
                <label for="lastname">Lastname</label>
                <input formControlName="lastname" class="form-control form-control-sm">
                <label for="email">Email</label>
                <input formControlName="email" class="form-control form-control-sm">
                <label for="gender">Gender</label>
                <select formControlName="gender" class="custom-select form-control form-control-sm">
                  <option>MALE</option>
                  <option>FEMALE</option>
                </select>
                <label for="nationalIdentificationNumber">NIDN</label>
                <input formControlName="nationalIdentificationNumber" class="form-control form-control-sm">
                <label for="phoneNumber">Phone number</label>
                <input formControlName="phoneNumber" class="form-control form-control-sm">
                <br/>
                <div class="form-group" formGroupName="car">
                  <h3>Car information</h3>
                  <label for="registrationNumber">Registration number</label>
                  <input formControlName="registrationNumber" class="form-control form-control-sm">
                  <label for="taxiNumber">Taxi number</label>
                  <input formControlName="taxiNumber" class="form-control form-control-sm">
                  <label for="yearOfManufactoring">Year of manufactoring</label>
                  <input formControlName="yearOfManufactoring" class="form-control form-control-sm">
                  <label for="carType">Car type</label>
                  <select formControlName="carType" class="custom-select form-control form-control-sm">
                    <option>PASSENGER</option>
                    <option>VAN</option>
                  </select>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button class="btn btn-primary" type="submit" [disabled]="!driverForm.valid" (click)="addDriver()">Add</button>
                </div>    
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col col-md-3">
      <h2>Refine rides</h2>
      <div [formGroup]="dispatcherRidesSearchForm">
        <button class="btn btn-primary refine" type="button" data-toggle="collapse" data-target="#searchByNameCollapse" aria-expanded="false" aria-controls="collapseExample">
          Search by name
        </button>
        <div class="collapse" id="searchByNameCollapse">
          <div class="card">
            <div class="card-body">
              <div class="card-header">
                Type of user:
                <div class="input-group">
                  <select formControlName="userType" class="custom-select form-control form-control-sm">
                    <option>CUSTOMER</option>
                    <option>DRIVER</option>
                  </select>
                </div>
              </div>
              &nbsp;
              <div class="card-header">
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="name">Name</label>
                    </div>
                    <input type="text" name="name" formControlName="name" class="form-control form-control-sm">
                  </div>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="lastname">Lastname</label>
                    </div>
                    <input type="text" name="lastname" formControlName="lastname" class="form-control form-control-sm">
                  </div>
              </div>
              <div class="input-group">
                <button mdbBtn class="btn btn-primary" type="submit" (click)="searchRides()">
                  Search&nbsp;<a class="fa fa-search"></a>
                </button>
              </div>                    
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col col-md-3">
      <h2>Rides</h2>
      <div *ngIf="allRides.length === 0">
        There are no rides in the system.
      </div>
      <div *ngIf="allRides.length > 0" class="side-list">
        <table class="table table-hover">
          <tr *ngFor="let ride of allRides">
            <td>
              <!--Card-->
              <div class="card">
                <!--Card content-->
                <div class="card-block">
                  <div class="card-body">
                    <!--Title-->
                    <h4 class="card-title">{{ride.startLocation?.address?.streetName}} {{ride.startLocation?.address?.streetNumber}}</h4>
                    <!--Text-->
                    <span class="card-text">Price: </span>
                    <span class="card-text">{{ride?.price}}</span>
                    <br/>
                    <span class="card-text">Street name: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.streetName}}</span>
                    <br/>
                    <span class="card-text">Street number: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.streetNumber}}</span>
                    <br/>
                    <span class="card-text">City: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.city}}</span>
                    <br/>
                    <span class="card-text">Postal code: </span>
                    <span class="card-text">{{ride?.startLocation?.address?.postalCode}}</span>
                    <br/>
                    <span class="card-text">Longitude: </span>
                    <span class="card-text">{{ride?.startLocation?.longitude}}</span>
                    <br/>
                    <span class="card-text">Latitude: </span>
                    <span class="card-text">{{ride?.startLocation?.latitude}}</span>
                    <br/>
                    <span class="card-text">Car type: </span>
                    <span class="card-text">{{ride?.carType}}</span>
                    <br/>
                    <span class="card-text">Timestamp: </span>
                    <span class="card-text">{{ride?.timestamp}}</span>
                    <br/>
                    <span class="card-text">Status: </span>
                    <span class="card-text">{{ride?.rideStatus}}</span>
                    <br/>
                    <span class="card-text">Customer:</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Name: </span>
                    <span class="card-text">{{ride?.customer?.name}}</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Lastname: </span>
                    <span class="card-text">{{ride?.customer?.lastname}}</span>
                    <br/>
                    <span class="card-text">Driver:</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Name: </span>
                    <span class="card-text">{{ride?.driver?.name}}</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Lastname: </span>
                    <span class="card-text">{{ride?.driver?.lastname}}</span>
                    <br/>
                    <span class="card-text">Dispatcher:</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Name: </span>
                    <span class="card-text">{{ride?.dispatcher?.name}}</span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="card-text">Lastname: </span>
                    <span class="card-text">{{ride?.dispatcher?.lastname}}</span>
                    <div *ngFor="let comment of ride?.comments">
                      <br/>
                      <span class="card-text">Rating: </span>
                      <span>
                          <a *ngFor="let rating of ratingList; let i = index" class="no-hover">
                            <i [ngStyle]="{'color': (i < comment?.rating) ? 'red' : 'grey'}" class="fa fa-star"></i>
                          </a>
                      </span>
                      <br/>
                      <form #addCommentForm="ngForm" (ngSubmit)="addComment(addCommentForm.value)">
                        <input type="text" hidden name="rideId" [(ngModel)]="ride.id" #rideId="ngModel"/>
                        <textarea readonly="true" type="text" class="form-control form-control-lg" placeholder="Leave a comment..." name="description" #description="ngModel" [ngModel]="comment?.description" (ngModelChange)="comment.description=$event"></textarea>
                        <span *ngIf="comment?.description !== null" class="card-text float-left">{{comment?.user.username}} at {{comment?.timestamp?.toLocaleDateString()}} {{comment?.timestamp?.toLocaleTimeString()}}</span>
                        <input *ngIf="comment?.user?.username === personalData?.username" type="submit" value="Comment" [disabled]="description.pristine" class="btn btn-primary btn-sm float-right"/>
                      </form>
                      <br/>
                    </div>
                  </div>
                </div>
                <!--/.Card content-->
              </div>
              <!--/.Card-->
            </td>
          </tr>
        </table>
      </div>
    </div>
    <div class="col col-md-3">
      <h2>Users</h2>
      <div *ngIf="allUsers.length > 0" class="side-list">
        <table class="table table-hover">
          <tr *ngFor="let user of allUsers">
            <td>
              <!--Card-->
              <div class="card">
                <div class="card-header">
                  <div class="card-header-tabs">
                    <div>
                      <button *ngIf="user?.role === 'DISPATCHER'" class="btn btn-success btn-sm float-right" disabled >Admin</button>
                      <button *ngIf="user?.role !== 'DISPATCHER' && !user?.isBanned" class="btn btn-danger btn-sm float-right" (click)="blockUser(user?.username)">Block</button>
                      <button *ngIf="user?.role !== 'DISPATCHER' && user?.isBanned" class="btn btn-danger btn-sm float-right" (click)="unblockUser(user?.username)">Unblock</button>
                    </div>
                  </div>
                </div>
                <!--Card content-->
                <div class="card-block">
                  <div class="card-body">
                    <!--Title-->
                    <h4 class="card-title">Personal data</h4>
                    <!--Text-->
                    <span class="card-text">Username: </span>
                    <span class="card-text">{{user?.username}}</span>
                    <br/>
                    <span class="card-text">Password: </span>
                    <span class="card-text">{{user?.password}}</span>
                    <br/>
                    <span class="card-text">Name: </span>
                    <span class="card-text">{{user?.name}}</span>
                    <br/>
                    <span class="card-text">Lastname: </span>
                    <span class="card-text">{{user?.lastname}}</span>
                    <br/>
                    <span class="card-text">Email: </span>
                    <span class="card-text">{{user?.email}}</span>
                    <br/>
                    <span class="card-text">Gender: </span>
                    <span class="card-text">{{user?.gender}}</span>
                    <br/>
                    <span class="card-text">NIDN: </span>
                    <span class="card-text">{{user?.nationalIdentificationNumber}}</span>
                    <br/>
                    <span class="card-text">Phone number: </span>
                    <span class="card-text">{{user?.phoneNumber}}</span>
                    <br/>
                    <span class="card-text">Role: </span>
                    <span class="card-text">{{user?.role}}</span>
                    <br/>
                    <div *ngIf="user?.car !== null">
                      <h4>Car data</h4>
                      <span class="card-text">Registration number: </span>
                      <span class="card-text">{{user?.car?.registrationNumber}}</span>
                      <br/>
                      <span class="card-text">Taxi number: </span>
                      <span class="card-text">{{user?.car?.taxiNumber}}</span>
                      <br/>
                      <span class="card-text">Year of manufactoring: </span>
                      <span class="card-text">{{user?.car?.yearOfManufactoring}}</span>
                      <br/>
                      <span class="card-text">Car type: </span>
                      <span class="card-text">{{user?.car?.carType}}</span>
                    </div>
                  </div>
                </div>
                <!--/.Card content-->
              </div>
              <!--/.Card-->
            </td>
          </tr>
        </table>
        <!-- </div> -->
      </div>
    </div>
  </div>
</div>